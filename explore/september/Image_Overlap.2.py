# coding=utf8

'''
将二维坐标转为一维坐标
将 (i, j) 变成 i * n + j


49 / 49 test cases passed.
    Status: Accepted
Runtime: 428 ms
Memory Usage: 12.9 MB
Submitted: 0 minutes ago
'''

import collections

class Solution(object):
    def largestOverlap(self, A, B):
        """
        :type A: List[List[int]]
        :type B: List[List[int]]
        :rtype: int
        """
        N = len(A)
        LA = [i / N * 100 + i % N for i in xrange(N * N) if A[i / N][i % N]]
        LB = [i / N * 100 + i % N for i in xrange(N * N) if B[i / N][i % N]]
        c = collections.Counter(i - j for i in LA for j in LB)
        return max(c.values() or [0])

        
if __name__ == '__main__':
    A = [[1,1,0],
        [0,1,0],
        [0,1,0]]
    B = [[0,0,0],
        [0,1,1],
        [0,0,1]]
    assert Solution().largestOverlap(A, B) == 3

    A = [[1,1,1,0,1,0,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,0,1,1,1,1,1,0,1,0,0],[0,1,1,0,1,1,1,0,1,1,1,0,1,1,1],[0,1,0,1,0,1,0,1,1,1,1,1,1,1,0],[1,1,1,1,1,0,0,0,1,1,1,0,1,1,0],[0,1,0,0,1,0,0,1,1,1,1,1,1,1,0],[1,1,1,0,1,1,1,1,1,0,1,0,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,0,1,1,0,1,1,1,1,1],[1,0,1,0,0,1,1,1,1,1,1,1,0,1,0],[1,1,1,1,1,0,0,1,1,0,0,1,1,1,1],[0,1,1,1,0,1,1,1,0,1,1,0,1,0,1],[1,1,0,1,1,0,1,0,1,1,1,1,1,0,1],[0,1,1,1,1,1,0,1,1,1,0,1,1,0,1],[0,1,0,1,1,0,1,1,1,0,1,1,1,0,1]]
    B = [[1,0,0,1,1,1,1,1,1,1,1,0,1,0,0],[1,0,0,1,0,1,1,1,1,0,1,1,0,1,1],[1,1,1,1,1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,0,1,0,0,0],[0,1,1,1,0,1,0,0,1,1,0,1,0,1,0],[1,1,1,1,1,1,1,1,0,1,1,1,0,1,1],[1,1,0,1,1,1,1,0,0,1,0,0,1,0,0],[1,1,1,0,0,1,1,1,1,1,1,1,1,1,0],[1,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,0,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,0,1,0,0,1,1,1,1,0,0,1,0],[1,1,1,0,0,1,1,0,1,1,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,0,1,0,1,1,1],[1,1,1,1,1,1,0,0,1,0,1,1,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,0]]
    assert Solution().largestOverlap(A, B) == 122

